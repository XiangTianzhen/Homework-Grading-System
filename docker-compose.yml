version: "3.8"
services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: grader-backend
    env_file:
      - ./config/backend.env
    ports:
      - "${BACKEND_HOST_PORT:-3000}:3000"
    volumes:
      - ./backend/uploads:/usr/src/app/uploads
      - ./backend/log:/usr/src/app/log
    restart: unless-stopped
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: grader-frontend
    ports:
      - "${FRONTEND_HOST_PORT:-5173}:80"
    depends_on:
      - backend
    restart: unless-stopped
